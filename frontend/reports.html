<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports - Retail Chain Inventory Tracker</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-brand">
        <h1>Retail Chain Inventory Tracker</h1>
      </div>
      <ul class="nav-menu">
        <li data-permission="reports">
          <a href="dashboard.html">Dashboard</a>
        </li>
        <li><a href="store_inventory.html">Store Inventory</a></li>
        <li data-permission="products">
          <a href="product_management.html">Product Management</a>
        </li>
        <li data-permission="reports">
          <a href="reports.html" class="active">Reports</a>
        </li>
        <li><a href="#" id="logoutBtn">Logout</a></li>
      </ul>
      <div class="user-info">
        <span id="currentUser">Loading...</span>
      </div>
    </nav>

    <main class="main-content">
      <div class="page-header">
        <h2>Reports & Analytics</h2>
        <p>Generate comprehensive reports and analyze inventory data</p>
      </div>

      <!-- Report Filters -->
      <div class="filters-section">
        <div class="filters-card">
          <h3>Report Filters</h3>
          <form id="reportFiltersForm">
            <div class="form-row">
              <div class="form-group">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate" class="form-control" />
              </div>

              <div class="form-group">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate" class="form-control" />
              </div>

              <div class="form-group">
                <label for="reportStoreSelect">Store:</label>
                <select id="reportStoreSelect" class="form-control">
                  <option value="">All Stores</option>
                </select>
              </div>
            </div>

            <div class="form-actions">
              <button
                type="button"
                class="btn btn-primary"
                onclick="generateStockReport()"
              >
                Generate Stock Report
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="generateLowStockReport()"
              >
                Low Stock Report
              </button>
              <button
                type="button"
                class="btn btn-info"
                onclick="exportToCSV()"
              >
                Export to CSV
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Stock Movement Report -->
      <div class="report-section">
        <div class="section-header">
          <h3>Stock Movement Report</h3>
          <div class="report-actions">
            <span id="reportPeriod" class="report-info"></span>
            <button class="btn btn-secondary btn-sm" onclick="refreshReport()">
              Refresh
            </button>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid" id="summaryGrid">
          <div class="summary-card">
            <h4>Total Stock In</h4>
            <div class="summary-value" id="totalStockIn">-</div>
          </div>
          <div class="summary-card">
            <h4>Total Stock Out</h4>
            <div class="summary-value" id="totalStockOut">-</div>
          </div>
          <div class="summary-card">
            <h4>Net Change</h4>
            <div class="summary-value" id="netChange">-</div>
          </div>
          <div class="summary-card">
            <h4>Total Transfers</h4>
            <div class="summary-value" id="totalTransfers">-</div>
          </div>
        </div>

        <!-- Transactions Table -->
        <div class="report-table-container">
          <table class="data-table" id="stockReportTable">
            <thead>
              <tr>
                <th>Date/Time</th>
                <th>Product</th>
                <th>Store</th>
                <th>Type</th>
                <th>Quantity</th>
                <th>Note</th>
                <th>User</th>
              </tr>
            </thead>
            <tbody id="stockReportBody">
              <tr>
                <td colspan="7" class="no-data">
                  No data available. Please generate a report.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Low Stock Report -->
      <div class="report-section">
        <div class="section-header">
          <h3>Low Stock Alert Report</h3>
          <div class="alert-summary">
            <span id="lowStockSummary" class="report-info"
              >Click "Low Stock Report" to view alerts</span
            >
          </div>
        </div>

        <div class="low-stock-grid" id="lowStockGrid">
          <div class="no-data">
            No low stock data available. Please generate a report.
          </div>
        </div>
      </div>

      <!-- Inventory Summary -->
      <div class="report-section">
        <div class="section-header">
          <h3>Current Inventory Summary</h3>
          <button
            class="btn btn-secondary btn-sm"
            onclick="refreshInventorySummary()"
          >
            Refresh
          </button>
        </div>

        <div class="inventory-summary-container">
          <table class="data-table" id="inventorySummaryTable">
            <thead>
              <tr>
                <th>Store</th>
                <th>Total Products</th>
                <th>Total Units</th>
                <th>Low Stock Items</th>
                <th>Last Updated</th>
              </tr>
            </thead>
            <tbody id="inventorySummaryBody">
              <tr>
                <td colspan="5" class="loading">
                  Loading inventory summary...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <script src="js/app.js"></script>
    <script src="js/reports.js"></script>
  </body>
</html>
